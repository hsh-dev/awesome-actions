name: Every Logger

on:
  push:
    branches:
      - 'main'
jobs:
  logging_event:
    runs-on: 'ubuntu-22.04'
    steps:
      - name: Log Event
        run: |
          echo ${{toJSON(github.event)}}
      - name: Log Commits
        run: |
          echo ${{toJSON(github.event.commits)}}
      - name: Log Event when release
        if: github.event_name == 'release'
        run: |
          # Remove 'refs/tags/' to get the actual tag from the release.
          TAG=${GITHUB_REF#refs/tags/};
          VERSION=$(scripts/get_version.py current)
          if [ "$TAG" != "$VERSION" ]; then
              echo "Bad tag or version. Tag $TAG does not match $VERSION";
              exit 1;
          fi
          
  logging_pr:
    runs-on: ubuntu-20.04
    steps:
    - name : Log PR
      run: |
        echo ${{toJSON(github.event.pull_request)}}
    - name : Log PR title
      run: |
        echo ${{ github.event.pull_request.title }}
    - name: Log PR body
      run: |
        echo ${{ github.event.pull_request.body }}
